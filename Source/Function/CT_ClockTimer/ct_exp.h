/* ******************************************************************************************** *
 *
 *  Project: Ora
 * -------------------------
 *  filename   : ct_exp.h
 *  author     : vanyid
 *  created on : 2011.03.08.
 *
 * ******************************************************************************************** */

#ifndef CT_EXP_H_
#define CT_EXP_H_

/***********************************************************************************************
 *                                             TYPEDEFS
 ***********************************************************************************************/
typedef enum
{
   eHetfo
  ,eKedd
  ,eSzerda
  ,eCsutortok
  ,ePentek
  ,eSzombat
  ,eVasarnap
} eDay;

typedef struct
{
  tUI8  hour;
  tUI8  minute;
  tUI8  sec;
  eDay  day;
} tTime;

/***********************************************************************************************
 *                                              MACROS
 ***********************************************************************************************/
// 1s timer
#define SET_TMR1() \
  TMR1H = 0x30; \
  TMR1L = 0x00;

// ~1ms timer
#define SET_TMR0() \
  TMR0L = 0x00;

/***********************************************************************************************
 *                                          GLOBAL VARIABLE
 ***********************************************************************************************/
enum
{
   LocalTimeZone       = 0
  ,MAX_NUM_TIME_ZONES
} eTimeZones;

extern tTime Times[MAX_NUM_TIME_ZONES];

#define LOCALTIME   Times[LocalTimeZone]

/***********************************************************************************************
 *                                          LOCAL VARIABLE
 ***********************************************************************************************/




/***********************************************************************************************
 *                                            PROTOTYPES
 ***********************************************************************************************/

extern tBOOL ct_Init();
extern tBOOL ct_1s_Run();

extern void IncTime(tTime *time);
extern tBOOL IncTimeHour(tTime *time);
extern tBOOL IncTimeMinute(tTime *time);
extern tBOOL IncTimeDay(tTime *time);

#endif
